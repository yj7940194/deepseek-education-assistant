# ç¨‹åºè¿è¡Œæ­¥éª¤æŒ‡å—

æ ¹æ®å¯¹ä»£ç åº“çš„åˆ†æï¼Œä»¥ä¸‹æ˜¯è®©è¿™ä¸ª DeepSeek Education Assistant ç¨‹åºè¿è¡Œæ‰€éœ€çš„å®Œæ•´æ­¥éª¤ã€‚

## å·²ä¿®å¤çš„é—®é¢˜

âœ… **å¯¼å…¥è·¯å¾„é—®é¢˜å·²ä¿®å¤**ï¼šæœåŠ¡æ–‡ä»¶å·²ä» `backend/utils/services/` ç§»åŠ¨åˆ° `backend/services/`ï¼Œä¸ä»£ç ä¸­çš„å¯¼å…¥è·¯å¾„ä¸€è‡´ã€‚

---

## è¿è¡Œæ­¥éª¤

### 1. åˆ›å»ºå¹¶é…ç½®ç¯å¢ƒå˜é‡æ–‡ä»¶

ä»é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼ˆå¦‚æœ `.env.example` å­˜åœ¨ï¼Œå¯ä»¥å¤åˆ¶å®ƒï¼‰ï¼š

```bash
# Windows PowerShell
Copy-Item .env.example .env

# æˆ–è€…æ‰‹åŠ¨åˆ›å»º .env æ–‡ä»¶
```

åœ¨ `.env` æ–‡ä»¶ä¸­é…ç½®ä»¥ä¸‹å˜é‡ï¼š

```env
# DeepSeek API é…ç½®ï¼ˆå¿…éœ€ï¼‰
DEEPSEEK_API_KEY=sk-your-api-key-here
DEEPSEEK_API_BASE=https://api.deepseek.com

# Neo4j é…ç½®ï¼ˆå¯é€‰ï¼Œä½†å»ºè®®é…ç½®ä»¥ä½¿ç”¨ RAG åŠŸèƒ½ï¼‰
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=your_neo4j_password

# åç«¯é…ç½®
BACKEND_PORT=8000
FRONTEND_ORIGIN=http://localhost:5173
```

**æ³¨æ„**ï¼š
- `DEEPSEEK_API_KEY` æ˜¯å¿…éœ€çš„ï¼Œå¦åˆ™æ— æ³•è°ƒç”¨ DeepSeek API
- Neo4j é…ç½®æ˜¯å¯é€‰çš„ï¼Œå¦‚æœä¸é…ç½®ï¼ŒRAG åŠŸèƒ½ä¼šé™çº§è¿è¡Œ

---

### 2. è®¾ç½® Python åç«¯ç¯å¢ƒ

#### 2.1 åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ

åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œï¼š

```bash
# Windows PowerShell
python -m venv .venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
.venv\Scripts\Activate.ps1

# Windows CMD
.venv\Scripts\activate.bat

# Linux/macOS
source .venv/bin/activate
```

#### 2.2 å®‰è£…åç«¯ä¾èµ–

ç¡®ä¿è™šæ‹Ÿç¯å¢ƒå·²æ¿€æ´»ï¼Œç„¶åæ‰§è¡Œï¼š

```bash
pip install -r backend/requirements.txt
```

è¿™å°†å®‰è£…ä»¥ä¸‹ä¾èµ–ï¼š
- `fastapi` - Web æ¡†æ¶
- `uvicorn[standard]` - ASGI æœåŠ¡å™¨
- `httpx` - å¼‚æ­¥ HTTP å®¢æˆ·ç«¯
- `python-dotenv` - ç¯å¢ƒå˜é‡åŠ è½½
- `neo4j` - Neo4j æ•°æ®åº“é©±åŠ¨
- `numpy` - æ•°å€¼è®¡ç®—ï¼ˆç”¨äºåµŒå…¥å‘é‡ï¼‰
- `pydantic` - æ•°æ®éªŒè¯

---

### 3. è®¾ç½® Neo4j æ•°æ®åº“ï¼ˆå¯é€‰ä½†æ¨èï¼‰

#### 3.1 å¯åŠ¨ Neo4j

å¦‚æœä½¿ç”¨ Dockerï¼ˆæ¨èï¼‰ï¼š

```bash
docker run \
  --name neo4j-deepseek-edu \
  -p 7474:7474 -p 7687:7687 \
  -e NEO4J_AUTH=neo4j/your_password \
  neo4j:5
```

æˆ–è€…ä½¿ç”¨æœ¬åœ°å®‰è£…çš„ Neo4jã€‚

#### 3.2 åˆå§‹åŒ–æ¼”ç¤ºæ•°æ®

åœ¨è™šæ‹Ÿç¯å¢ƒæ¿€æ´»çš„æƒ…å†µä¸‹ï¼Œè¿è¡Œåˆå§‹åŒ–è„šæœ¬ï¼š

```bash
python backend/utils/db_init.py
```

è¿™å°†åˆ›å»ºä»¥ä¸‹æ¼”ç¤ºæ•°æ®ï¼š
- ä¸»é¢˜ï¼šçº¿æ€§ä»£æ•°ã€å¾®ç§¯åˆ†ã€æœºå™¨å­¦ä¹ 
- æ¯ä¸ªä¸»é¢˜çš„é—®é¢˜å’Œç­”æ¡ˆ
- çŸ¥è¯†å›¾è°±å…³ç³»

---

### 4. å¯åŠ¨åç«¯æœåŠ¡å™¨

ç¡®ä¿ï¼š
- âœ… è™šæ‹Ÿç¯å¢ƒå·²æ¿€æ´»
- âœ… `.env` æ–‡ä»¶å·²é…ç½®ï¼ˆè‡³å°‘åŒ…å« `DEEPSEEK_API_KEY`ï¼‰

ç„¶åè¿è¡Œï¼š

```bash
# Windows PowerShell
uvicorn backend.main:app --reload --port 8000

# æˆ–è€…ä½¿ç”¨ç¯å¢ƒå˜é‡ä¸­çš„ç«¯å£
uvicorn backend.main:app --reload --port $env:BACKEND_PORT
```

åç«¯å°†åœ¨ä»¥ä¸‹åœ°å€è¿è¡Œï¼š
- HTTP API: `http://localhost:8000`
- WebSocket: `ws://localhost:8000/ws/chat`
- å¥åº·æ£€æŸ¥: `http://localhost:8000/api/health`

**éªŒè¯åç«¯æ˜¯å¦è¿è¡Œ**ï¼š
åœ¨æµè§ˆå™¨ä¸­è®¿é—® `http://localhost:8000/api/health`ï¼Œåº”è¯¥çœ‹åˆ°ï¼š
```json
{"status":"ok"}
```

---

### 5. è®¾ç½®å‰ç«¯ç¯å¢ƒ

#### 5.1 å®‰è£…å‰ç«¯ä¾èµ–

æ‰“å¼€æ–°çš„ç»ˆç«¯çª—å£ï¼Œè¿›å…¥å‰ç«¯ç›®å½•ï¼š

```bash
cd frontend
npm install
```

è¿™å°†å®‰è£…ï¼š
- `vue` - Vue 3 æ¡†æ¶
- `marked` - Markdown æ¸²æŸ“
- `vite` - æ„å»ºå·¥å…·
- `tailwindcss` - CSS æ¡†æ¶
- å…¶ä»–å¼€å‘ä¾èµ–

#### 5.2 å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

å‰ç«¯å°†åœ¨ `http://localhost:5173` è¿è¡Œã€‚

---

### 6. æµ‹è¯•å®Œæ•´ç³»ç»Ÿ

1. **æ‰“å¼€æµè§ˆå™¨**è®¿é—® `http://localhost:5173`
2. **æ£€æŸ¥ WebSocket è¿æ¥**ï¼šæ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰ï¼ŒæŸ¥çœ‹æ§åˆ¶å°ï¼Œåº”è¯¥çœ‹åˆ° `[WebSocket] Connected`
3. **å‘é€æµ‹è¯•æ¶ˆæ¯**ï¼šåœ¨èŠå¤©æ¡†ä¸­è¾“å…¥é—®é¢˜ï¼Œä¾‹å¦‚ï¼š
   - "What is a derivative?"
   - "What is a matrix?"
   - "What is supervised learning?"

4. **éªŒè¯åŠŸèƒ½**ï¼š
   - âœ… æ¶ˆæ¯åº”è¯¥å®æ—¶æµå¼æ˜¾ç¤º
   - âœ… åŠ©æ‰‹å›å¤åº”è¯¥ä»¥ Markdown æ ¼å¼æ¸²æŸ“
   - âœ… å¦‚æœé…ç½®äº† Neo4jï¼Œåº”è¯¥èƒ½çœ‹åˆ°åŸºäºçŸ¥è¯†å›¾è°±çš„ä¸Šä¸‹æ–‡å¢å¼º

---

## å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜ 1: å¯¼å…¥é”™è¯¯ `ModuleNotFoundError: No module named 'backend.services'`

**è§£å†³æ–¹æ¡ˆ**ï¼šç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œå‘½ä»¤ï¼Œå¹¶ä¸” Python è·¯å¾„æ­£ç¡®ã€‚å¯ä»¥å°è¯•ï¼š
```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
python -m uvicorn backend.main:app --reload
```

### é—®é¢˜ 2: DeepSeek API é”™è¯¯

**æ£€æŸ¥**ï¼š
- `.env` æ–‡ä»¶ä¸­çš„ `DEEPSEEK_API_KEY` æ˜¯å¦æ­£ç¡®
- API key æ˜¯å¦æœ‰æ•ˆ
- ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸

### é—®é¢˜ 3: Neo4j è¿æ¥å¤±è´¥

**æ£€æŸ¥**ï¼š
- Neo4j æ˜¯å¦æ­£åœ¨è¿è¡Œ
- `.env` ä¸­çš„ Neo4j é…ç½®æ˜¯å¦æ­£ç¡®
- é˜²ç«å¢™æ˜¯å¦é˜»æ­¢äº†ç«¯å£ 7687

**æ³¨æ„**ï¼šå³ä½¿ Neo4j æœªé…ç½®ï¼Œç¨‹åºä»å¯è¿è¡Œï¼Œä½† RAG åŠŸèƒ½ä¼šé™çº§ã€‚

### é—®é¢˜ 4: å‰ç«¯æ— æ³•è¿æ¥åˆ°åç«¯

**æ£€æŸ¥**ï¼š
- åç«¯æ˜¯å¦æ­£åœ¨è¿è¡Œï¼ˆè®¿é—® `http://localhost:8000/api/health`ï¼‰
- `frontend/src/utils/websocket.js` ä¸­çš„ `WS_URL` æ˜¯å¦ä¸åç«¯ç«¯å£åŒ¹é…
- CORS é…ç½®æ˜¯å¦æ­£ç¡®ï¼ˆæ£€æŸ¥ `.env` ä¸­çš„ `FRONTEND_ORIGIN`ï¼‰

### é—®é¢˜ 5: ç«¯å£å†²çª

å¦‚æœç«¯å£ 8000 æˆ– 5173 å·²è¢«å ç”¨ï¼š
- ä¿®æ”¹ `.env` ä¸­çš„ `BACKEND_PORT`
- ä¿®æ”¹ `frontend/vite.config.js` ä¸­çš„å‰ç«¯ç«¯å£
- æ›´æ–° `frontend/src/utils/websocket.js` ä¸­çš„ `WS_URL`

---

## é¡¹ç›®ç»“æ„æ€»ç»“

```
DeepSeek Education Assistant/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ services/          # âœ… å·²ä¿®å¤ï¼šæœåŠ¡æ–‡ä»¶å·²ç§»åŠ¨åˆ°è¿™é‡Œ
â”‚   â”‚   â”œâ”€â”€ deepseek_service.py
â”‚   â”‚   â””â”€â”€ rag_service.py
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ websocket_routes.py
â”‚   â”‚   â””â”€â”€ rest_routes.py
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ neo4j_client.py
â”‚   â”‚   â”œâ”€â”€ embedding_utils.py
â”‚   â”‚   â””â”€â”€ db_init.py     # âœ… æ–°å¢ï¼šNeo4j åˆå§‹åŒ–è„šæœ¬
â”‚   â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ config.py
â”‚   â”œâ”€â”€ main.py
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ frontend/
â”‚   â””â”€â”€ src/
â”œâ”€â”€ .env                   # âš ï¸ éœ€è¦åˆ›å»º
â””â”€â”€ README.md
```

---

## ä¸‹ä¸€æ­¥

å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œç¨‹åºåº”è¯¥å¯ä»¥æ­£å¸¸è¿è¡Œã€‚å¦‚æœéœ€è¦ï¼š

1. **æ·»åŠ æ›´å¤šçŸ¥è¯†å›¾è°±æ•°æ®**ï¼šä¿®æ”¹ `backend/utils/neo4j_client.py` ä¸­çš„ `init_demo_data` å‡½æ•°
2. **è‡ªå®šä¹‰ç³»ç»Ÿæç¤º**ï¼šä¿®æ”¹ `backend/api/websocket_routes.py` ä¸­çš„ `_SYSTEM_PROMPT`
3. **è°ƒæ•´å‰ç«¯æ ·å¼**ï¼šä¿®æ”¹ `frontend/src/components/ChatBox.vue` å’Œ Tailwind é…ç½®

ç¥ä½¿ç”¨æ„‰å¿«ï¼ğŸ‰





